============================================
DATABASE CREDENTIALS & SQL QUERIES
============================================

DATABASE CONNECTION:
Host: localhost
Database: realestate_db
User: root
Password: [Your MySQL Password]

============================================
DATABASE TABLES - COMPLETE SQL QUERIES
============================================

-- 1. INQUIRIES TABLE (General inquiries from all pages)
CREATE TABLE IF NOT EXISTS inquiries (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL,
    phone VARCHAR(20) NOT NULL,
    message TEXT,
    source VARCHAR(100) DEFAULT 'Website',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_email (email),
    INDEX idx_phone (phone),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 2. BUILDER INQUIRIES TABLE (Builder-specific inquiries)
CREATE TABLE IF NOT EXISTS builder_inquiries (
    id INT AUTO_INCREMENT PRIMARY KEY,
    builder_name VARCHAR(255) NOT NULL,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL,
    phone VARCHAR(20) NOT NULL,
    message TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_builder_name (builder_name),
    INDEX idx_email_phone (email, phone),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 3. CAREER SUBMISSIONS TABLE
CREATE TABLE IF NOT EXISTS career_submissions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL,
    phone VARCHAR(20) NOT NULL,
    position VARCHAR(100) NOT NULL,
    resume_path VARCHAR(500),
    message TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_position (position),
    INDEX idx_email (email),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

============================================
HOW TO SET UP ALL TABLES:
============================================

1. Open MySQL Command Line or phpMyAdmin
2. Select your database: USE realestate_db;
3. Copy and paste ALL THREE CREATE TABLE queries above
4. Execute each query
5. Verify tables were created: SHOW TABLES;

You should see:
- inquiries
- builder_inquiries  
- career_submissions

============================================
FORM SOURCES & MESSAGE TYPES:
============================================

INQUIRIES TABLE:
- NRI Corner Form: source = 'NRI Corner'
- Contact Page Form: source = 'Contact Page'
- Quick Call Button: source = 'Instant Enquiry'
- Property Inquiry: source = 'Property Page'

BUILDER_INQUIRIES TABLE:
- Builder Page Form: message = user's custom message
- Call Button on Builder Page: message = 'Instant Enquiry - Request for immediate callback'

CAREER_SUBMISSIONS TABLE:
- Career Page Applications with position and resume

============================================
USEFUL QUERIES:
============================================

-- Check for duplicate submissions (prevent spam)
SELECT * FROM builder_inquiries 
WHERE (email = 'user@email.com' OR phone = '9876543210') 
AND created_at > DATE_SUB(NOW(), INTERVAL 24 HOUR);

-- View all instant enquiries
SELECT * FROM builder_inquiries 
WHERE message LIKE '%Instant Enquiry%' 
ORDER BY created_at DESC;

-- Count inquiries by builder
SELECT builder_name, COUNT(*) as total,
       SUM(CASE WHEN message LIKE '%Instant%' THEN 1 ELSE 0 END) as instant_enquiries
FROM builder_inquiries 
GROUP BY builder_name;

-- View today's inquiries across all tables
SELECT 'General' as type, name, email, phone, created_at 
FROM inquiries WHERE DATE(created_at) = CURDATE()
UNION ALL
SELECT 'Builder' as type, name, email, phone, created_at 
FROM builder_inquiries WHERE DATE(created_at) = CURDATE()
UNION ALL  
SELECT 'Career' as type, name, email, phone, created_at
FROM career_submissions WHERE DATE(created_at) = CURDATE()
ORDER BY created_at DESC;

============================================
IMPORTANT NOTES:
============================================

1. DUPLICATE PREVENTION:
   - System checks for duplicate email/phone in last 24 hours
   - Returns 409 status code if duplicate found
   - Prevents spam submissions

2. EMAIL NOTIFICATIONS:
   - Automatic confirmation email sent to customer
   - Email includes inquiry details and callback promise
   - If email fails, inquiry is still saved

3. VALIDATION RULES:
   - Name: Minimum 2 characters, letters and spaces only
   - Email: Valid email format required
   - Phone: 10 digits, must start with 6-9 (Indian format)
   - All fields are required except message

4. API ENDPOINTS:
   - POST /api/inquiry - General inquiries
   - POST /api/builder-inquiry - Builder specific
   - POST /api/career - Career applications
   - GET /api/admin/inquiries - View all inquiries

5. BACKUP RECOMMENDATION:
   - Daily backup of all inquiry tables
   - Export as SQL for easy restoration
   - Keep 30 days of backups

============================================
